=== Nova Kakhovka eCity API Test Data ===
Test Date: 2026-01-05 18:14:37

TEST DATA USED:
---------------
Email: testuser_20260105181437@example.com
Password: TestPassword123!
First Name: Test
Last Name: User
Group Name: Test Group 181437
Group Description: A test group for API testing

GENERATED IDs:
--------------
User ID: 
Group ID: 
Token: Not obtained

TEST RESULTS:
-------------
Health Check: Status 404 - False
Register User: Status 404 - False
Login: Status 404 - False

ENDPOINTS TESTED:
-----------------
1. GET  /health
2. POST /api/v1/auth/register
3. POST /api/v1/auth/login
4. GET  /api/v1/auth/profile (not executed - no token)
5. POST /api/v1/groups (not executed - no token)
6. GET  /api/v1/groups (not executed - no token)

API BASE URL:
-------------
http://localhost:8080

API VERSION:
------------
v1

TEST SCENARIO:
--------------
1. Health check endpoint to verify server is running
2. Register a new user with unique email (timestamp-based)
3. Login with registered credentials to obtain JWT token
4. Get user profile using JWT token
5. Create a new group (requires authentication)
6. List all groups (requires authentication)

EXPECTED BEHAVIOR:
------------------
- Health endpoint should return 200 OK with status "ok"
- Register should return 201 Created with user ID
- Login should return 200 OK with JWT token and user object
- Profile should return 200 OK with user details
- Create group should return 201 Created with group ID
- Get groups should return 200 OK with array of groups

ACTUAL RESULTS:
---------------
All endpoints returned 404 Not Found, indicating the server is not running
or the routes are not properly configured.

ERROR CORRECTION PROMPT:
========================

Please review the Nova Kakhovka eCity backend API and fix the following issues:

1. SERVER STATUS:
   - The server appears to be not running or not accessible on http://localhost:8080
   - All endpoints tested returned 404 Not Found errors
   - Action: Verify the server is running and accessible on the expected port

2. ROUTE CONFIGURATION:
   - Verify that all routes in cmd/server/main.go are correctly registered
   - Check that the route paths match the Postman collection routes:
     * /health (should be at root level)
     * /api/v1/auth/register
     * /api/v1/auth/login
     * /api/v1/auth/profile
     * /api/v1/groups
   - Ensure the Gin router is properly initialized and routes are registered before server starts

3. DATABASE CONNECTION:
   - Verify MongoDB is running and accessible
   - Check MongoDB connection string in configuration (default: mongodb://localhost:27017)
   - Verify database name (default: nova_kakhovka_ecity)
   - Ensure all required collections exist or can be created automatically

4. ENVIRONMENT CONFIGURATION:
   - Check if .env file exists with proper configuration
   - Verify JWT_SECRET is set (required for authentication)
   - Ensure PORT is set to 8080 (or update tests if using different port)
   - Verify all required environment variables are set

5. TEST DATA VALIDATION:
   - Test data used:
     * Email: testuser_20260105181437@example.com
     * Password: TestPassword123!
     * First Name: Test
     * Last Name: User
   - Verify email validation rules in the registration handler
   - Verify password requirements (minimum length, complexity rules)
   - Check if duplicate email registration is properly handled

6. AUTHENTICATION FLOW:
   - Verify JWT token generation on successful login
   - Check token format and expiration settings
   - Verify Authorization header parsing in middleware
   - Ensure protected routes properly validate JWT tokens

7. ERROR HANDLING:
   - Review error responses to ensure they follow consistent format
   - Verify error messages are user-friendly and informative
   - Check that 404 errors are only returned for non-existent routes, not for server errors

8. POSTMAN COLLECTION SYNC:
   - Ensure Postman collection routes match actual API routes
   - Verify all route prefixes are correct (/api/v1/auth/... vs /api/v1/...)
   - Update collection if routes have changed

9. LOGGING:
   - Check server logs for startup errors
   - Verify database connection logs
   - Review route registration logs
   - Check for any panic or fatal errors during startup

10. NEXT STEPS AFTER FIXES:
    - Start the server: go run cmd/server/main.go
    - Re-run the test script: powershell -ExecutionPolicy Bypass -File test_api.ps1
    - Verify all endpoints return expected status codes (200, 201, etc.)
    - Test full authentication flow: register → login → protected routes
    - Test error cases: invalid credentials, duplicate registration, unauthorized access

ADDITIONAL NOTES:
-----------------
- The test script uses PowerShell Invoke-WebRequest for API testing
- Test data includes timestamp-based email to avoid duplicate registration errors
- All tests should be run with the server running and database accessible
- MongoDB must be running before starting the server
- JWT_SECRET environment variable must be set for authentication to work
